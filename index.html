<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Easy Note - κ°„νΈν• λ…ΈνΈ κ³µμ </title>
    
    <!-- PWA Meta Tags -->
    <meta name="description" content="μ—¬λ¬ κΈ°κΈ°μ—μ„ λ…ΈνΈλ¥Ό μ‹¤μ‹κ°„μΌλ΅ κ³µμ ν•μ„Έμ”">
    <meta name="theme-color" content="#3498db">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Easy Note">
    
    <!-- Icons -->
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="apple-touch-icon" href="/icons/icon-152x152.png">
    <link rel="manifest" href="/manifest.json">
    
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="header-content">
                <div class="header-left">
                    <h1>π“ Easy Note</h1>
                    <p class="subtitle">μ—¬λ¬ κΈ°κΈ°μ—μ„ λ…ΈνΈλ¥Ό μ‹¤μ‹κ°„μΌλ΅ κ³µμ ν•μ„Έμ”</p>
                </div>
                <div class="header-right">
                    <div id="authContainer" class="auth-container">
                        <button id="loginBtn" class="btn btn-secondary">
                            <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google" class="google-icon">
                            Google λ΅κ·ΈμΈ
                        </button>
                        <button id="adminPanelBtn" class="btn btn-secondary" style="display: none; width: auto; padding: 0.75rem 1.5rem;">
                            π› οΈ κ΄€λ¦¬μ ν¨λ„
                        </button>
                        <div id="userInfo" class="user-info" style="display: none;">
                            <img id="userPhoto" class="user-photo" alt="User">
                            <div class="user-details">
                                <span id="userName" class="user-name"></span>
                                <span id="adminBadge" class="admin-badge" style="display: none;">κ΄€λ¦¬μ</span>
                            </div>
                            <button id="logoutBtn" class="btn-icon-sm">π</button>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- λ£Έ μ„ νƒ ν™”λ©΄ -->
        <div id="roomSelection" class="room-selection">
            <div class="room-card">
                <h2>π“… μ¤λ λ°© μ…μ¥</h2>
                <p class="room-card-desc">μ¤λ λ‚ μ§λ΅ μƒμ„±λ κΈ°λ³Έ λ°©μ— λ°”λ΅ μ…μ¥ν•©λ‹λ‹¤</p>
                <button id="joinTodayRoomBtn" class="btn btn-primary">
                    <span>π“…</span> μ¤λ λ°© μ…μ¥ (<span id="todayRoomCode"></span>)
                </button>
            </div>

            <div class="divider">
                <span>λλ”</span>
            </div>

            <div class="room-card">
                <h2>π†• μƒ λ°© λ§λ“¤κΈ°</h2>
                <p class="room-card-desc">μ¤λ λ‚ μ§μ μƒλ΅μ΄ λ²νΈ λ°©μ„ μƒμ„±ν•©λ‹λ‹¤</p>
                <button id="createRoomBtn" class="btn btn-primary">
                    <span>π€</span> μƒ λ°© μƒμ„±
                </button>
            </div>

            <div class="divider">
                <span>λλ”</span>
            </div>

            <div class="room-card">
                <h2>π”— λ‚ μ§λ³„ λ³΄κΈ°</h2>
                <p class="room-card-desc">κ³Όκ±° λ‚ μ§μ λ°©μ— μ…μ¥ν•©λ‹λ‹¤</p>
                
                <div style="display: flex; gap: 0.5rem; align-items: stretch; margin-bottom: 0.5rem;">
                    <input 
                        type="date" 
                        id="datePickerInput" 
                        class="room-input" 
                        style="flex: 1; min-width: 0; height: 44px;"
                    >
                    <button id="joinDateRoomBtn" class="btn btn-secondary" style="flex: 0 0 70px; white-space: nowrap; height: 44px; padding: 0 0.5rem;">
                        <span>π“…</span> μ΅°ν
                    </button>
                </div>
                
                <div style="display: flex; gap: 0.5rem; align-items: stretch;">
                    <input 
                        type="text" 
                        id="roomCodeInput" 
                        class="room-input" 
                        placeholder=""
                        maxlength="10"
                        style="flex: 1; min-width: 0; height: 44px;"
                    >
                    <button id="joinRoomBtn" class="btn btn-secondary" style="flex: 0 0 70px; white-space: nowrap; height: 44px; padding: 0 0.5rem;">
                        <span>π”—</span> μ…μ¥
                    </button>
                </div>
                
                <!-- λ‚ μ§λ³„ λ°© λ©λ΅ -->
                <div id="dateRoomList" style="display: none; margin-top: 1rem;">
                    <div style="font-size: 0.9rem; font-weight: 600; margin-bottom: 0.5rem; color: #555;">
                        μ„ νƒν• λ‚ μ§μ λ°© λ©λ΅
                    </div>
                    <div id="dateRoomItems" style="max-height: 200px; overflow-y: auto;">
                        <!-- λ°© λ©λ΅μ΄ μ—¬κΈ°μ— ν‘μ‹λ©λ‹λ‹¤ -->
                    </div>
                </div>
            </div>
        </div>

        <!-- κ΄€λ¦¬μ ν¨λ„ -->
        <div id="adminPanel" class="admin-panel" style="display: none;">
            <div class="admin-header">
                <h2>π› οΈ κ΄€λ¦¬μ ν¨λ„</h2>
                <button id="closeAdminBtn" class="btn btn-secondary">λ‹«κΈ°</button>
            </div>
            <div class="admin-content">
                <div class="admin-stats">
                    <div class="stat-card" id="normalRoomsCard" style="cursor: pointer;">
                        <div class="stat-value" id="normalRooms">0</div>
                        <div class="stat-label">μΌλ° λ£Έ</div>
                    </div>
                    <div class="stat-card" id="permanentRoomsCard" style="cursor: pointer; opacity: 0.7;">
                        <div class="stat-value" id="permanentRooms">0</div>
                        <div class="stat-label">μκµ¬ λ£Έ</div>
                    </div>
                </div>
                <div class="admin-rooms" id="adminRoomList">
                    <!-- λ£Έ λ©λ΅μ΄ μ—¬κΈ°μ— ν‘μ‹λ©λ‹λ‹¤ -->
                </div>
            </div>
        </div>

        <!-- ν΄λ¦½λ³΄λ“ κ³µμ  ν™”λ©΄ -->
        <div id="clipboardArea" class="clipboard-area" style="display: none;">
            <div class="room-info">
                <div class="room-code-display">
                    <span class="label">λ£Έ μ½”λ“:</span>
                    <span id="currentRoomCode" class="room-code"></span>
                    <button id="copyRoomCodeBtn" class="btn-icon" title="λ£Έ μ½”λ“ λ³µμ‚¬">π“‹</button>
                    <span id="permanentBadge" class="permanent-badge" style="display: none;">π”’ μκµ¬ λ³΄κ΄€</span>
                </div>
                <div class="connection-status">
                    <span id="connectionStatus" class="status-indicator">β«</span>
                    <span id="connectionText">μ—°κ²° μ¤‘...</span>
                </div>
                <div class="room-actions">
                    <button id="togglePermanentRoomBtn" class="btn-icon-sm" style="display: none;" title="μκµ¬ λ³΄κ΄€ ν† κΈ€">π”’</button>
                    <button id="deleteRoomBtn" class="btn-icon-sm danger" style="display: none;" title="λ£Έ μ‚­μ ">π—‘οΈ</button>
                    <button id="leaveRoomBtn" class="btn btn-leave">λ‚κ°€κΈ°</button>
                </div>
            </div>

            <div class="clipboard-content">
                <!-- AI μΌμ • μ •λ¦¬ μ„Ήμ… -->
                <div class="gpt-section" style="margin-bottom: 2rem;">
                    <h4>π¤– AI μΌμ • μ •λ¦¬</h4>
                    <p class="gpt-description">λ©”λ¨λ¥Ό μ…λ ¥ν•λ©΄ AIκ°€ μ •λ¦¬λ μΌμ •μΌλ΅ λ³€ν™ν•΄λ“λ¦½λ‹λ‹¤</p>
                    
                    <div class="gpt-input-area">
                        <textarea 
                            id="gptPromptInput" 
                            class="gpt-textarea" 
                            placeholder="μ: λ‚΄μΌ μ¤ν›„ 3μ‹ νμ, κΈμ”μΌ μ €λ… 7μ‹ μ €λ… μ•½μ†"
                            rows="4"
                        ></textarea>
                        <div style="display: flex; gap: 0.5rem;">
                            <button id="gptVoiceBtn" class="btn btn-secondary" style="flex: 1;">
                                <span>π¤</span> λ§λ΅ μ“°κΈ°
                            </button>
                            <button id="sendGptBtn" class="btn btn-primary" style="flex: 1;">
                                <span>β¨</span> AIλ΅ μ •λ¦¬ν•κΈ°
                            </button>
                        </div>
                    </div>
                    
                    <div id="gptResultArea" class="gpt-result-area" style="display: none;">
                        <div class="gpt-result-header">
                            <h5>μ •λ¦¬λ κ²°κ³Ό</h5>
                            <button id="saveGptResultBtn" class="btn btn-secondary btn-sm">
                                <span>π’Ύ</span> λ…ΈνΈλ΅ μ €μ¥
                            </button>
                        </div>
                        <div id="gptResultContent" class="gpt-result-content"></div>
                    </div>
                </div>

                <div class="content-header">
                    <h3>κΈ°λ΅μ™„λ£ λ…ΈνΈ</h3>
                    <div class="clipboard-count">
                        <span id="clipboardCount">0</span>κ°μ λ…ΈνΈ
                    </div>
                </div>

                <!-- λ…ΈνΈ μ¶”κ°€ λ²„νΌ -->
                <div style="margin-bottom: 1rem; display: flex; gap: 0.5rem;">
                    <button id="voiceRecordBtn" class="btn btn-secondary" style="flex: 1;">
                        <span>π¤</span> λ§λ΅ μ“°κΈ°
                    </button>
                    <button id="addClipboardBtn" class="btn btn-primary" style="flex: 1;">
                        <span>β•</span> λ…ΈνΈ μ¶”κ°€
                    </button>
                </div>

                <!-- μƒ λ…ΈνΈ μ¶”κ°€ μμ—­ -->
                <div class="new-clipboard">
                    <textarea 
                        id="newClipboardText" 
                        class="clipboard-textarea" 
                        placeholder="μƒ λ…ΈνΈ λ‚΄μ©μ„ μ…λ ¥ν•κ±°λ‚ λ¶™μ—¬λ„£μΌμ„Έμ”..."
                        maxlength="10000"
                        rows="3"
                    ></textarea>
                    <div class="new-clipboard-actions">
                        <div class="char-count">
                            <span id="newCharCount">0</span> / 10,000 μ
                        </div>
                    </div>
                </div>

                <!-- ν΄λ¦½λ³΄λ“ λ©λ΅ -->
                <div class="clipboard-list">
                    <div id="clipboardItems" class="clipboard-items">
                        <!-- λ…ΈνΈ μ•„μ΄ν…λ“¤μ΄ μ—¬κΈ°μ— λ™μ μΌλ΅ μ¶”κ°€λ©λ‹λ‹¤ -->
                        <div class="empty-state">
                            <p>π“ μ•„μ§ κ³µμ λ λ…ΈνΈκ°€ μ—†μµλ‹λ‹¤.</p>
                            <p>μ„μ—μ„ μƒ λ…ΈνΈλ¥Ό μ¶”κ°€ν•΄λ³΄μ„Έμ”!</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- μ•λ¦Ό λ©”μ‹μ§€ -->
        <div id="notification" class="notification"></div>
        
        <!-- PWA μ„¤μΉ ν”„λ΅¬ν”„νΈ -->
        <div id="installPrompt" class="install-prompt" style="display: none;">
            <div class="install-prompt-content">
                <div class="install-prompt-icon">π“±</div>
                <div class="install-prompt-text">
                    <h4>μ•±μΌλ΅ μ„¤μΉν•κΈ°</h4>
                    <p>ν™ ν™”λ©΄μ— μ¶”κ°€ν•μ—¬ μ•±μ²λΌ μ‚¬μ©ν•μ„Έμ”</p>
                </div>
                <button id="installBtn" class="btn btn-primary">μ„¤μΉ</button>
                <button id="dismissInstallBtn" class="btn btn-secondary">λ‚μ¤‘μ—</button>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    
    <!-- App Scripts -->
    <script type="module" src="js/app.js"></script>
</body>
</html>
